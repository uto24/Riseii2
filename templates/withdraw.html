{% extends "base.html" %}

{% block content %}
<div class="max-w-md mx-auto mb-24">
    <h2 class="text-2xl font-bold mb-4 text-gray-800 border-l-4 border-green-600 pl-3">Withdraw Money</h2>

    <!-- Current Status Card -->
    <div class="bg-gradient-to-r from-gray-800 to-gray-900 text-white p-6 rounded-xl shadow-lg mb-6 relative overflow-hidden">
        <i class="fas fa-wallet absolute -right-6 -bottom-6 text-8xl text-white opacity-10"></i>
        <p class="text-gray-400 text-sm">Available Balance</p>
        <h1 class="text-4xl font-bold mb-4">à§³ {{ user.balance }}</h1>
        
        <div class="grid grid-cols-2 gap-4 border-t border-gray-700 pt-4">
            <div>
                <p class="text-xs text-gray-400">Total Referrals</p>
                <p class="font-bold text-lg text-blue-400">{{ user.referral_count }} <span class="text-xs text-gray-500">/ 3</span></p>
            </div>
            <div>
                <p class="text-xs text-gray-400">Account Status</p>
                {% if user.is_active %}
                    <p class="font-bold text-lg text-green-400">Active <i class="fas fa-check-circle"></i></p>
                {% else %}
                    <p class="font-bold text-lg text-red-400">Not Active <i class="fas fa-times-circle"></i></p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Condition Warning (Visual Only) -->
    {% if user.balance < 250 or user.referral_count < 3 %}
    <div class="bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg text-sm mb-6 flex gap-3">
        <i class="fas fa-exclamation-triangle text-xl mt-1"></i>
        <div>
            <strong>Withdraw Requirement:</strong>
            <ul class="list-disc pl-4 mt-1">
                <li class="{{ 'text-green-600 font-bold' if user.balance >= 250 else '' }}">Minimum Balance: 250 BDT</li>
                <li class="{{ 'text-green-600 font-bold' if user.referral_count >= 3 else '' }}">Minimum Referrals: 3 People</li>
            </ul>
        </div>
    </div>
    {% endif %}

    <!-- Withdraw Form -->
    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
        <form method="POST" class="space-y-4">
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">Payment Method</label>
                <select name="method" class="w-full border border-gray-300 p-3 rounded-lg bg-gray-50 focus:ring-2 focus:ring-green-500 outline-none">
                    <option value="bkash">bKash</option>
                    <option value="nagad">Nagad</option>
                    <option value="rocket">Rocket</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">Wallet Number</label>
                <input type="number" name="number" placeholder="017xxxxxxxx" required class="w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-green-500 outline-none">
            </div>

            <div>
                <label class="block text-sm font-bold text-gray-700 mb-1">Amount (Min 50)</label>
                <input type="number" name="amount" placeholder="e.g. 100" min="50" required class="w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-green-500 outline-none">
            </div>

            <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition shadow-lg transform active:scale-95">
                Withdraw Request
            </button>
        </form>
    </div>
</div>
{% endblock %}
